(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{124:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return m}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var b=r.a.createContext({}),l=function(e){var t=r.a.useContext(b),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},d=function(e){var t=l(e.components);return r.a.createElement(b.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,b=s(e,["components","mdxType","originalType","parentName"]),d=l(a),u=n,m=d["".concat(i,".").concat(u)]||d[u]||p[u]||o;return a?r.a.createElement(m,c(c({ref:t},b),{},{components:a})):r.a.createElement(m,c({ref:t},b))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:n,i[1]=c;for(var b=2;b<o;b++)i[b]=a[b];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"},99:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return c})),a.d(t,"toc",(function(){return s})),a.d(t,"default",(function(){return l}));var n=a(3),r=a(7),o=(a(0),a(124)),i={title:"Backups",id:"backups"},c={unversionedId:"working-with-bee/backups",id:"working-with-bee/backups",isDocsHomePage:!1,title:"Backups",description:"In order to ensure you are able to redeploy your Bee node in the event of a disaster, the contents of several directories must be retained.",source:"@site/docs/working-with-bee/backups.md",slug:"/working-with-bee/backups",permalink:"/docs/working-with-bee/backups",editUrl:"https://github.com/ethersphere/docs.github.io/blob/master/docs/working-with-bee/backups.md",version:"current",sidebar:"Balls",previous:{title:"Monitoring Your Node",permalink:"/docs/working-with-bee/monitoring"},next:{title:"Upgrading Bee",permalink:"/docs/working-with-bee/upgrading-bee"}},s=[{value:"Bee",id:"bee",children:[{value:"Ubuntu / Debian / Raspbian / CentOS Package Managers",id:"ubuntu--debian--raspbian--centos-package-managers",children:[]},{value:"Manual",id:"manual",children:[]},{value:"Docker Compose",id:"docker-compose",children:[]}]},{value:"Data Types",id:"data-types",children:[{value:"Keys",id:"keys",children:[]},{value:"Statestore",id:"statestore",children:[]},{value:"Localstore",id:"localstore",children:[]}]},{value:"Clef",id:"clef",children:[{value:"Ubuntu / Debian / Raspbian / CentOS Package Managers",id:"ubuntu--debian--raspbian--centos-package-managers-1",children:[]},{value:"Manual",id:"manual-1",children:[]}]}],b={toc:s};function l(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},b,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"In order to ensure you are able to redeploy your Bee node in the event of a disaster, the contents of several directories must be retained."),Object(o.b)("div",{className:"admonition admonition-danger alert alert--danger"},Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(o.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})))),"danger")),Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"Your keys represent your ability to access your BZZ. Make sure to back up your keys directory in multiple places, so you can keep your BZZs safe! See below to discover the location of your keys."))),Object(o.b)("div",{className:"admonition admonition-info alert alert--info"},Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"Don't forget - it's not a backup until you have restored it! Make sure to test your backups out so that you can be sure of recovery incase of data loss or data corruption."))),Object(o.b)("h2",{id:"bee"},"Bee"),Object(o.b)("p",null,"To restore a Bee node you must have the following directories, all backed up in an atomic moment so that they are syncronised."),Object(o.b)("p",null,"All of this data is contained within the ",Object(o.b)("em",{parentName:"p"},"data directory")," specified in your Bee configuration. "),Object(o.b)("h3",{id:"ubuntu--debian--raspbian--centos-package-managers"},"Ubuntu / Debian / Raspbian / CentOS Package Managers"),Object(o.b)("p",null,"For Linux installations from package managers ",Object(o.b)("em",{parentName:"p"},"yum")," or ",Object(o.b)("em",{parentName:"p"},"apt"),", your data directory is located at:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"/var/lib/bee\n")),Object(o.b)("p",null,"It may be also useful for you to retain your configuration files, which are held at:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"/etc/bee\n")),Object(o.b)("h3",{id:"manual"},"Manual"),Object(o.b)("p",null,"For a ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/installation/manual"}),"manual installation")," your data directory is normally located at:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"~/.bee\n")),Object(o.b)("h3",{id:"docker-compose"},"Docker Compose"),Object(o.b)("p",null,"When using our ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/installation/docker"}),"Docker Compose")," configuration files to run your node, Docker will create a volume for Bee and a volume for Bee Clef."),Object(o.b)("p",null,"You may use ",Object(o.b)("inlineCode",{parentName:"p"},"docker cp")," to retrieve the contents of these folders."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"docker cp bee_bee_1:/home/bee/.bee/ bee\ndocker cp bee_clef_1:/app clef\n")),Object(o.b)("h2",{id:"data-types"},"Data Types"),Object(o.b)("p",null,"Your Bee data directory contains three stores."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{}),"/Users/sig/.bee\n\u251c\u2500\u2500 keys\n\u2502\xa0\xa0 \u251c\u2500\u2500 libp2p.key\n\u2502\xa0\xa0 \u251c\u2500\u2500 pss.key\n\u2502\xa0\xa0 \u2514\u2500\u2500 swarm.key\n\u251c\u2500\u2500 localstore\n\u2502\xa0\xa0 \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 statestore\n    \u2514\u2500\u2500 ...\n")),Object(o.b)("h3",{id:"keys"},"Keys"),Object(o.b)("p",null,"The keys directory contains your important key material. This is the most important data by far, and is produced and retained from Bee's initialisation procedure. If you have used ",Object(o.b)("strong",{parentName:"p"},"Bee-clef")," to manage your key material and signing procedures, see below for information on how to keep backups of your keys."),Object(o.b)("div",{className:"admonition admonition-info alert alert--info"},Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"If you are using Bee to manage your keys (not recommended - please use ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/installation/bee-clef"}),"Bee Clef"),"!). You must convert your keys in order to import into Metamask and other Ethereum wallets. You may use ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/ethersphere/exportSwarmKey"}),"exportSwarmKeys")," to make the conversion."))),Object(o.b)("h3",{id:"statestore"},"Statestore"),Object(o.b)("p",null,"The statestore directory retains information related to your node, including SWAP balances, info on peers, blocklisting and much more."),Object(o.b)("div",{className:"admonition admonition-info alert alert--info"},Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"Although your statestore retains your node's state. It is only possible to restore from this if your node has not been connected in the meantime, as the blockchain and state may have desyncronised if your node was turned on in the meantime."))),Object(o.b)("h3",{id:"localstore"},"Localstore"),Object(o.b)("p",null,"The localstore directory contains chunks that are pinned in your node, or are in your neighbourhood of responsibility."),Object(o.b)("h2",{id:"clef"},"Clef"),Object(o.b)("p",null,"It is also important to back up Clef's stored data. This includes your sensitive key material, so make sure to keep this private and safe!"),Object(o.b)("h3",{id:"ubuntu--debian--raspbian--centos-package-managers-1"},"Ubuntu / Debian / Raspbian / CentOS Package Managers"),Object(o.b)("div",{className:"admonition admonition-danger alert alert--danger"},Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(o.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})))),"danger")),Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"Your keys represent your ability to access your BZZ. Make sure to back up your keys directory in multiple places, so you can keep your BZZs safe!"))),Object(o.b)("p",null,"For Linux installations from package managers ",Object(o.b)("em",{parentName:"p"},"yum")," or ",Object(o.b)("em",{parentName:"p"},"apt"),", your Clef data directory is located at."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"/var/lib/bee-clef/\n")),Object(o.b)("p",null,"Configuration files are stored in:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"/etc/bee-clef/\n")),Object(o.b)("h3",{id:"manual-1"},"Manual"),Object(o.b)("p",null,"For a manual installation of Clef your data directory is normally located at:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"~/.clef\n")))}l.isMDXComponent=!0}}]);